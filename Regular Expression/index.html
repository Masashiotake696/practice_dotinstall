<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>正規表現の勉強</title>
  </head>
  <body>
    <script>
      /*
        ■match()
          ▼概要
            正規表現に対する文字列のマッチングの際に、そのマッチ結果を得るために使われる
          ▼構文
            str.match(regexp)
              regexp ... 正規表現オブジェクト。正規表現オブジェクトは//で囲む
          ▼返り値
            文字列が正規表現にマッチした場合、マッチした文字列全体を最初の要素として含み、括弧内で捕捉された結果が後に続くような配列を返す。マッチが見つからなかった場合はnullを返す
        ■正規表現
          ▼メタ文字(特殊な意味を持つ文字)
            ♦︎[]
              指定する文字のうちどれか
              例) [abc]とすると、aかbかcのどれか一文字という意味
              ■-
                範囲
                例) [a-c]とすると、aからcまでのどれか一文字という意味
              ■^
                否定
                例) [^abc]とすると、aかbかcじゃない一文字という意味
            ♦︎.
              任意の一文字という意味
              ■^
                行頭という意味。
                ※単体で使った場合。大括弧([])とペアになっている場合は否定になる
              ■$
                行末という意味
            ♦︎{}
              直前の文字の繰り返す回数
              例)
                ・0{2} → 00
                ・0{2,} → 2回以上0が続くの0の羅列
                ・0{2,4} → 00, 000, 0000
              ■?
                直前の文字があるかないか。0回か1回の繰り返し
                例) a? → (なし), a
              ■*
                0回以上の直前の文字の繰り返し
                例) a* → (なし), a, aa, aaa, aaaa ...
              ■+
                1回以上の直前の文字の繰り返し
                例) a+ → a, aa, aaa, aaaa ...
            ♦︎()
              特定の文字列をくくる
              例) (abc)* → (なし), abc, abcabc, abcabcabc ...
              ■|
                どちらかと言う意味
                例) (abc|def) ... abc もしくは def
            ♦︎\
              \n ... 改行
              \t ... タブ
              \d ... 数字、[0-9]と同意
              \w ... 英数字と_、[A-Za-z0-9_]と同意
              \s ... スペースもしくはタブ
              \メタ文字 ... それ自体がメタ文字になる
                例) /をマッチに含めたい場合に、\/とする
          ▼フラグ
            正規表現のパターンの後ろにつけるいくつかのオプション。
            JavaScriptの場合はiとgとmがある。
            オプションは複数つけられる。
            ♦︎i
              大文字小文字を区別しないという意味
              例) /taguchi/i ... taguchi, Taguchi, TAGUCHI
            ♦︎g
              全てのマッチした要素を配列で返すという意味。
              ※普通に正規表現を使った場合は最初の一個しか返さない
            ♦︎m
              複数行に対応させるという意味。
              行頭や行末に対するメタ文字の動作が変わる。
              Webページ全体を取ってきて、何かをするときに改行文字が入ってくることがある。このときに、改行文字が入ってくるので、行頭と行末は全体の始めと終わりにしかマッチしない。ここで、mオプションをつけると、\nの前後も含めて行頭と行末のマッチができる
          ▼*?, +?
            最小マッチをさせる
            例)
              /.+@dotinstall.com/
              とした場合に通常はマッチ部分が最大になるような文字列を返す。
              このときに、
              /.+?@dotinstall.com/
              とすると最初のだけがマッチするようになる。
          ▼RegExp
            パターンに従ったテキストにマッチする正規表現オブジェクトを生成する
            例)
              'taguchi@dotinstall.com'.match(/(.+?)@dotinstall(.com)/);
              console.log(RegExp.$1); // 直前の正規表現パターンでマッチしたもののうち一つ目の括弧のものを取り出す
              console.log(RegExp.$2); // 直前の正規表現パターンでマッチしたもののうち二つ目の括弧のものを取り出す
      */
      // var s = '@taguchi, @fkoji, @dotinstall';
      // var result = s.match(/taguchi/);
      // if (result) {
      //   console.log('マッチしました!');
      // }

      // ツイッターID
      // var s = '@taguchi';
      // var result = s.match(/(@[A-Za-z0-9_]{1,15})/) // ツイッターIDは@マークがあって、その後に英数文字が来る。桁数制限は1文字から15文字
      // console.log(RegExp.$1);

      // タイトルタグを抽出する
      // var s = '<title>ドットインストール</title>';
      // var result = s.match(/<title>([^<]+)<\/title>/);
      // console.log(RegExp.$1);

      // 日付を日本語表記に直す
      var s = '2012-03-24'; // 2012年03月24日
      var result = s.match(/(\d{4})[-\/](\d{2})[-\/](\d{2})/);
      console.log(RegExp.$1 + '年' + RegExp.$2 + '月' + RegExp.$3 + '日');
    </script>
  </body>
</html>
